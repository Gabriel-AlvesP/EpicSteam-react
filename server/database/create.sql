SET FOREIGN_KEY_CHECKS = 0;
CREATE TABLE IF NOT EXISTS Users (id           varchar(255) NOT NULL, username     varchar(255) NOT NULL UNIQUE, email        varchar(255) NOT NULL UNIQUE, password     varchar(255) NOT NULL, picture varchar(255),joinDate date NOT NULL, refreshToken varchar(255) UNIQUE, PRIMARY KEY (id));
CREATE TABLE IF NOT EXISTS Posts (id          int NOT NULL AUTO_INCREMENT, title       varchar(255) NOT NULL, cover varchar(255), banner varchar(255), description varchar(255), price decimal(15,2) NOT NULL, postDate datetime NOT NULL, owner       varchar(255) NOT NULL, PRIMARY KEY (id),CONSTRAINT FKPosts943508 FOREIGN KEY (owner) REFERENCES Users (id));
CREATE TABLE IF NOT EXISTS Categories (id   int NOT NULL AUTO_INCREMENT, name varchar(255) NOT NULL, icon varchar(255), PRIMARY KEY (id));
CREATE TABLE IF NOT EXISTS Comments (id          int NOT NULL AUTO_INCREMENT, description varchar(255), userId      varchar(255) NOT NULL, postId      int NOT NULL, PRIMARY KEY (id),CONSTRAINT FKComments62468 FOREIGN KEY (userId) REFERENCES Users (id),CONSTRAINT FKComments918220 FOREIGN KEY (postId) REFERENCES Posts (id));
CREATE TABLE IF NOT EXISTS Reactions (id     int NOT NULL AUTO_INCREMENT, type     varchar(255) NOT NULL, quantity int, commentId   int NOT NULL, PRIMARY KEY (id), CONSTRAINT FKReactions308889 FOREIGN KEY (commentId) REFERENCES Comments (id));
CREATE TABLE IF NOT EXISTS Users_Posts (userId    varchar(255) NOT NULL, postId    int NOT NULL, didPlay bit(1) NOT NULL, vote    int DEFAULT 0, PRIMARY KEY (userId, postId),CONSTRAINT FKUsers_Post6551 FOREIGN KEY (userId) REFERENCES Users (id),CONSTRAINT FKUsers_Post150798 FOREIGN KEY (postId) REFERENCES Posts (id));
CREATE TABLE IF NOT EXISTS Roles (role int NOT NULL, PRIMARY KEY (role));
CREATE TABLE IF NOT EXISTS User_Roles (role int NOT NULL, userId varchar(255) NOT NULL, PRIMARY KEY (role, userId) ,CONSTRAINT FKUser_Roles65193 FOREIGN KEY (userId) REFERENCES Users (id), CONSTRAINT FKUser_Roles351103 FOREIGN KEY (role) REFERENCES Roles (role));
CREATE TABLE IF NOT EXISTS Posts_Categories (categoryId int NOT NULL, postId int NOT NULL, PRIMARY KEY (categoryId, postId), CONSTRAINT FKPosts_Categories791531 FOREIGN KEY (categoryId) REFERENCES Categories (id), CONSTRAINT  FKPosts_Categories21937 FOREIGN KEY (postId) REFERENCES Posts (id));
SET FOREIGN_KEY_CHECKS = 1;